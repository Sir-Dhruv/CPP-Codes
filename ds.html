<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testimonial Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .testimonial-box {
            border: 1px solid #dee2e6;
            border-radius: 0.25rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            background-color: #f8f9fa;
            position: relative;
        }

        .testimonial-author {
            font-weight: bold;
        }

        .testimonial-text {
            margin-top: 0.5rem;
            color: #495057;
        }

        .btn-group-sm {
            position: absolute;
            top: 10px;
            right: 10px;
        }
    </style>
</head>
<body>

    <div class="container mt-5" style="max-width: 80%;">
        <div class="card p-4 mb-4">
            <h5 class="card-title text-center">Testimonials</h5>
            <div class="input-group mb-3">
                <span class="input-group-text bg-primary text-white" style="min-width: 100px;">Name</span>
                <input type="text" class="form-control" id="nameInput" placeholder="Your Name">
            </div>
            <div class="input-group mb-3">
                <span class="input-group-text bg-primary text-white" style="min-width: 100px;">Message</span>
                <textarea class="form-control" id="messageInput" placeholder="Enter your Message"></textarea>
            </div>
            <div class="text-center">
                <button id="submitBtn" class="btn btn-success px-5">Submit</button>
            </div>
        </div>

        <div id="testimonialsContainer">
            <div class="testimonial-box">
                <div class="testimonial-author">Ritu</div>
                <div class="testimonial-text">It has been a positive experience with personable banking service in a timely manner.</div>
                <div class="btn-group-sm">
                    <button class="btn btn-primary edit-btn">Edit</button>
                    <button class="btn btn-danger delete-btn">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const nameInput = document.getElementById('nameInput');
        const messageInput = document.getElementById('messageInput');
        const submitBtn = document.getElementById('submitBtn');
        const testimonialsContainer = document.getElementById('testimonialsContainer');

        let isEditing = false;
        let testimonialToEdit = null;

        // Function to create and add a new testimonial element
        function createTestimonialElement(name, message) {
            const testimonialDiv = document.createElement('div');
            testimonialDiv.classList.add('testimonial-box');

            testimonialDiv.innerHTML = `
                <div class="testimonial-author">${name}</div>
                <div class="testimonial-text">${message}</div>
                <div class="btn-group-sm">
                    <button class="btn btn-primary edit-btn">Edit</button>
                    <button class="btn btn-danger delete-btn">Delete</button>
                </div>
            `;

            testimonialsContainer.appendChild(testimonialDiv);
            return testimonialDiv;
        }

        // Event listener for the submit button
        submitBtn.addEventListener('click', () => {
            const name = nameInput.value.trim();
            const message = messageInput.value.trim();

            if (name === '' || message === '') {
                alert('Please enter your name and message.');
                return;
            }

            if (isEditing) {
                // Update the existing testimonial
                testimonialToEdit.querySelector('.testimonial-author').textContent = name;
                testimonialToEdit.querySelector('.testimonial-text').textContent = message;
                submitBtn.textContent = 'Submit';
                isEditing = false;
                testimonialToEdit = null;
            } else {
                // Add a new testimonial
                createTestimonialElement(name, message);
            }

            // Clear the form inputs
            nameInput.value = '';
            messageInput.value = '';
        });

        // Event listener for the testimonials container (handles Edit and Delete)
        testimonialsContainer.addEventListener('click', (event) => {
            const target = event.target;
            const testimonialBox = target.closest('.testimonial-box');

            if (!testimonialBox) return; // Ensure a testimonial box was clicked

            if (target.classList.contains('edit-btn')) {
                // Get the current name and message
                const name = testimonialBox.querySelector('.testimonial-author').textContent;
                const message = testimonialBox.querySelector('.testimonial-text').textContent;

                // Populate the form with the current values
                nameInput.value = name;
                messageInput.value = message;

                // Change button text and set state for editing
                submitBtn.textContent = 'Update';
                isEditing = true;
                testimonialToEdit = testimonialBox;
            } else if (target.classList.contains('delete-btn')) {
                // Remove the testimonial from the DOM
                if (confirm('Are you sure you want to delete this testimonial?')) {
                    testimonialBox.remove();
                }
            }
        });
    </script>
</body>
</html>
